
#INCLUDE <TV_PICKIT2_SHIFT_1.C>
#INCLUDE <TV_PICKIT2_SHIFT_LCD.C>

unsigned INT8 GIAY, phut, gio;

unsigned INT8 DV, CH, TR;

VOID LCD_HIENTHI_DONGHO(time)
{
   LCD_GOTO_XY (0, 15) ;
   DELAY_US (20);
   TR = time / 100 + 0x30;
   
   CH = (time / 10 % 10) + 0x30;
   
   DV = time % 10 + 0x30;
   
   IF (TR == 0x30)
   {
      TR = " ";

      IF (CH == 0x30)
      {
         CH = " ";
      }
   }

   LCD_DATA (TR) ;
   LCD_DATA (CH) ;
   LCD_DATA (DV) ;
}

VOID MAIN()
{
   SET_UP_PORT_IC_CHOT ();
   SETUP_LCD ();
   LCD_GOTO_XY (0, 0) ;
   LCD_DATA ("DONG HO:");
   GIAY = 100;

   WHILE (TRUE)
   {
      LCD_HIENTHI_DONGHO ();
      DELAY_MS (300);
      GIAY++;
      //!      IF (GIAY == 150) GIAY = 0;

      IF (giay == 60)
      {
         giay = 0l;
         phut++;

         IF (phut == 60)
         {
            phut = 0;
            gio++;

            IF (gio == 24)
            {
               gio = 0;
            }
         }
      }
   }
}

